@import url("animate.css");
@import url("fonts.css");
@import "tailwindcss";

/* =========================================================
   0) Theme tokens (colors, fonts) + dark variant (TW v4)
   ========================================================= */
:root{
  --space-red:#90393a;
  --space-yellow:#ffff85;
  --space-sand:#e2d1c3;
  --space-stone:#434343;

  /* iOS safe-area */
  --sat: env(safe-area-inset-top);
  --sar: env(safe-area-inset-right);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
}

/* Tailwind v4 */
@custom-variant dark (&:where(.dark, .dark *));
@theme{
  --font-sans: "Kanit","sans-serif";
  --color-space-red: var(--space-red);
  --color-space-yellow: var(--space-yellow);
  --color-space-sand: var(--space-sand);
  --color-space-stone: var(--space-stone);
  --color-whitesmoke: whitesmoke;
}

/* =========================================================
   1) Global guards (anti overflow, mobile safe area)
   ========================================================= */
*,
*::before,
*::after{ box-sizing:border-box; }

html,body{
  width:100%;
  max-width:100%;
  min-height:100%;
  margin:0;
  padding:0;

  /* penting: biar tetap bisa scroll */
  overflow-x:hidden;
  overflow-y:auto;
  -webkit-overflow-scrolling: touch;

  @apply text-base;
}

/* Kadang sticky gagal kalau ancestor punya overflow.
   Pastikan elemen utama overflow:visible */
:where(body, main, .page-content, .inner-container, .layout, .page, .container){
  overflow: visible !important;
}

body{
  padding: max(0px,var(--sat)) max(0px,var(--sar)) max(0px,var(--sab)) max(0px,var(--sal));
}

/* =========================================================
   2) Background (full-bleed)
   ========================================================= */
html.dark body{
  background-image:linear-gradient(to bottom,var(--color-space-stone) 0%,#000 100%);
  @apply bg-black bg-cover bg-no-repeat text-whitesmoke;
}
html:not(.dark) body{
  background-image:linear-gradient(180deg,#fdfcfb 0%,var(--color-space-sand) 100%);
  @apply bg-space-sand bg-cover bg-no-repeat text-black;
}

/* Media defaults */
img,video,canvas,svg{ display:block; max-width:100%; height:auto; }

/* Kartu/gambar pratinjau blog: pastikan proporsional */
.card-image,
.post-card img{
  width:100%;
  height:auto;
  object-fit:cover;
  border-radius:1rem;
}

/* =========================================================
   3) Header sticky (selalu terlihat)
   ========================================================= */
/* Header container */
header{
  position: sticky;                         /* inti sticky */
  top: calc(var(--sat) + 8px);              /* kasih ruang dari notch/top */
  z-index: 50;                              /* di atas konten */
  margin-top: calc(var(--sat) + 8px);       /* spasi visual dari atas */
  @apply mr-auto ml-auto flex w-full max-w-3xl flex-col items-center justify-center px-0 py-0 text-base;
}

/* Bar navigasi */
header > nav{
  @apply flex flex-row items-center justify-between gap-2 rounded-4xl px-5 py-2 text-xs sm:gap-8 sm:py-3 sm:text-base backdrop-blur-3xl;
  /* warna latar semi-transparan agar kontras saat menempel konten */
  background: color-mix(in oklab, #fff 75%, transparent);
}
html.dark header > nav{
  background: color-mix(in oklab, #111 70%, transparent);
}

/* Shadow halus supaya terasa “mengambang” */
header > nav{
  box-shadow:
    inset 0 0 0.5px 1px hsla(0,0%,100%,0.075),
    0 0 0 1px hsla(0,0%,0%,0.05),
    0 .3px .4px hsla(0,0%,0%,0.02),
    0 .9px 1.5px hsla(0,0%,0%,0.045),
    0 3.5px 6px hsla(0,0%,0%,0.09);
}

/* Mengurangi “loncat” saat keyboard mobile muncul */
header{ contain: layout style; }

/* =========================================================
   4) Main & Footer
   ========================================================= */
main{ @apply w-full min-h-screen; }

/* Footer container (tanpa watermark raksasa) + ruang bawah aman */
footer{
  padding-bottom: calc(max(24px, var(--sab)) + 12px);
  @apply mx-auto mt-12 w-full max-w-3xl flex flex-col flex-wrap items-center justify-center gap-4 px-4;
}

/* =========================================================
   5) Typography
   ========================================================= */
h1{ @apply py-4 text-2xl sm:py-6 sm:text-6xl; }
h2{ @apply py-2 text-xl sm:py-4 sm:text-3xl; }
p { @apply mb-6; }
img{ @apply rounded-xl; }

/* =========================================================
   6) Links & buttons
   ========================================================= */
a.button-link:not(:disabled),
button.button-link:not(:disabled){
  @apply inline-flex cursor-pointer items-center justify-center rounded-full border px-6 py-2 leading-tight transition sm:px-8
         hover:border-space-red hover:text-space-red
         hover:dark:border-space-yellow hover:dark:text-space-yellow;
}
a.button-link.space-btn-filled:not(:disabled),
button.button-link.space-btn-filled:not(:disabled){
  @apply bg-black text-whitesmoke hover:border-space-red hover:bg-space-red
         dark:bg-whitesmoke dark:text-black dark:hover:border-space-yellow dark:hover:bg-space-yellow;
}
a.button-link.space-btn-outlined:not(:disabled),
button.button-link.space-btn-outlined:not(:disabled){
  @apply border border-black bg-transparent text-black
         hover:border-space-red hover:text-space-red
         dark:border-whitesmoke dark:bg-transparent dark:text-whitesmoke
         dark:hover:border-space-yellow dark:hover:text-space-yellow;
}

/* Tautan umum */
html.dark a:not(.button-link){ @apply text-whitesmoke; }
html:not(.dark) a:not(.button-link){ @apply text-black; }
html:not(.dark) a:not(.button-link):hover{ @apply text-space-red; }
html.dark a:not(.button-link):hover{ @apply text-space-yellow; }

/* =========================================================
   7) Forms (subscribe)
   ========================================================= */
input[type="email"],
input[type="text"],
input[type="search"]{
  @apply w-full rounded-3xl border border-black/30 bg-white/60 px-5 py-3 outline-none
         focus:border-space-red focus:ring-2 focus:ring-space-red/30
         dark:border-white/30 dark:bg-black/40 dark:text-whitesmoke
         dark:focus:border-space-yellow dark:focus:ring-space-yellow/30;
}

/* =========================================================
   8) Page content helpers
   ========================================================= */
.page-content{ @apply my-12 w-full px-4 text-center; }
@media (orientation: portrait){ .page-content{ text-align:left; } }
@media (max-width:315px){ section{ gap:3rem; } }

/* Konten artikel (markdown) aman di mobile */
.prose img{ height:auto !important; max-width:100% !important; border-radius:0.75rem; }
.prose table{ display:block; width:100%; overflow:auto; }

/* =========================================================
   9) Small utilities
   ========================================================= */
@keyframes cursor-blink{ 0%{ opacity:0; } }
.blinking{ animation:cursor-blink 1.2s steps(2) infinite; }
