---
import { Image } from "astro:assets";
import MainLayout from "../layouts/MainLayout.astro";
import siteConfig from "../site.config";
import coverImage from "../assets/images/pixeltrue-space-discovery.svg";

const pageTitle = siteConfig.title + " | Tentang Kami";
const pageDescription =
  siteConfig.about?.text ??
  "Pelajari lebih lanjut tentang Twotworial â€” konsultan & drafter furniture untuk bisnis yang lebih efisien.";

/** Pastikan base absolut; fallback ke domain utama */
const siteBase = Astro.site ?? siteConfig.website ?? "https://twotworial.com";

/** Canonical absolut */
const canonicalUrl = new URL("/about", siteBase).href;

/** Schema.org JSON-LD */
const aboutPageSchema = {
  "@context": "https://schema.org",
  "@type": "AboutPage",
  name: pageTitle,
  description: pageDescription,
  url: canonicalUrl,
  publisher: {
    "@type": "Organization",
    name: siteConfig.title,
    logo: {
      "@type": "ImageObject",
      url: new URL(siteConfig.image?.src ?? "/TwotworialSQ.webp", siteBase).href
    }
  },
  primaryImageOfPage: {
    "@type": "ImageObject",
    // pakai path publik yang ada saat build
    url: new URL("/assets/images/pixeltrue-space-discovery.svg", siteBase).href,
    caption: "Tentang Twotworial"
  }
};

// string aman untuk inline (escape '<')
const aboutPageSchemaStr = JSON.stringify(aboutPageSchema).replace(/</g, "\\u003c");
---

<MainLayout
  activePage="about"
  pageTitle={pageTitle}
  description={pageDescription}
  image={"/assets/images/pixeltrue-space-discovery.svg"}
  breadcrumbTitle="Tentang Kami"
>
  <!-- JSON-LD -->
  <script type="application/ld+json" is:inline set:html={aboutPageSchemaStr}></script>

  <div class="page-content">
    <h1 class="text-balance">{siteConfig.about?.title ?? "Tentang Kami"}</h1>

    <Image
      width={1024}
      height={600}
      loading="eager"
      class="mb-8 mx-auto rounded-4xl"
      src={coverImage}
      alt="Tentang Twotworial"
    />

    <p class="text-left">
      {siteConfig.about?.text ??
        "Twotworial membantu UMKM/manufaktur furniture menyusun gambar kerja, draftlist, dan costing yang rapi serta mudah dieksekusi."}
    </p>
  </div>
</MainLayout>
